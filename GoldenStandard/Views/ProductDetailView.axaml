<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:GoldenStandard.ViewModels"
             xmlns:models="using:GoldenStandard.Models"
             x:Class="GoldenStandard.Views.ProductDetailView"
             x:DataType="vm:ProductDetailViewModel">

	<Grid RowDefinitions="Auto, *" Background="#F5F5F5">
		<Button Content="← Назад" Command="{Binding GoBack}" Margin="15"
                Background="#E0E0E0" BorderBrush="#CCCCCC"/>

		<ScrollViewer Grid.Row="1">
			<StackPanel Margin="20" Spacing="20">

				<Border Background="White" CornerRadius="15" Padding="20" BoxShadow="0 4 10 0 #15000000">
					<StackPanel Spacing="15">
						<Border Height="180" Background="#F9F9F9" CornerRadius="10">
							<Image Source="/Assets/avalonia-logo.ico" Opacity="0.6" Margin="40"/>
						</Border>

						<Grid ColumnDefinitions="*, 80">
							<StackPanel Grid.Column="0">
								<TextBlock Text="{Binding SelectedProduct.Name}" FontSize="22"
                                           FontWeight="Bold" Foreground="#333333" TextWrapping="Wrap"/>
								<TextBlock Text="{Binding SelectedProduct.Price, StringFormat={}{0} ₽}"
                                           FontSize="20" Foreground="#555555" Margin="0,5"/>
								<TextBlock Text="{Binding SelectedProduct.Manufacturer}" FontSize="12" Foreground="Gray"/>
								<TextBlock Text="{Binding SelectedProduct.AverageRating, StringFormat='★ {0}'}"
                                           Foreground="#999999" FontSize="18" FontWeight="Bold" Margin="0,5,0,0"/>
							</StackPanel>

							<Border Grid.Column="1" Background="{Binding SelectedProduct.QualityColor}"
                                    CornerRadius="10" Height="65" Width="65" VerticalAlignment="Top">
								<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
									<TextBlock Text="{Binding SelectedProduct.QualityScore, StringFormat={}{0}%}"
                                               Foreground="White" FontWeight="Bold" FontSize="18"/>
									<TextBlock Text="КАЧЕСТВО" Foreground="White" FontSize="8" FontWeight="Bold"/>
								</StackPanel>
							</Border>
						</Grid>

						<Separator Background="#EEEEEE"/>
						<TextBlock Text="{Binding SelectedProduct.Description}" Foreground="#666666" TextWrapping="Wrap" FontSize="14"/>
					</StackPanel>
				</Border>

				<TextBlock Text="СОСТАВ" FontWeight="Bold" Foreground="#888888" FontSize="12" Margin="5,0"/>
				<ItemsControl ItemsSource="{Binding SelectedProduct.Ingredients}">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border Background="White" Margin="0,2" Padding="12" CornerRadius="8" BoxShadow="0 1 3 0 #05000000">
								<TextBlock Text="{Binding}" FontSize="14" Foreground="#444444"/>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>

				<TextBlock Text="ОСТАВИТЬ ОТЗЫВ" FontWeight="Bold" Foreground="#888888" FontSize="12" Margin="5,10,0,0"/>
				<Border Background="White" Padding="15" CornerRadius="12" BoxShadow="0 4 10 0 #15000000">
					<StackPanel Spacing="10">
						<ComboBox ItemsSource="{Binding StarOptions}" SelectedItem="{Binding NewStars}"
                                  HorizontalAlignment="Stretch" Background="#F9F9F9">
							<ComboBox.ItemTemplate>
								<DataTemplate>
									<StackPanel Orientation="Horizontal" Spacing="5">
										<TextBlock Text="{Binding}"/>
										<TextBlock Text="★" Foreground="#999999"/>
									</StackPanel>
								</DataTemplate>
							</ComboBox.ItemTemplate>
						</ComboBox>
						<TextBox Text="{Binding NewText}" Watermark="Ваш отзыв..." Height="80" TextWrapping="Wrap"/>
						<Button Content="ОТПРАВИТЬ" Command="{Binding Send}"
                                Background="#4A4A4A" Foreground="White" HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Center" FontWeight="Bold"/>
					</StackPanel>
				</Border>

				<TextBlock Text="ОТЗЫВЫ ПОКУПАТЕЛЕЙ" FontWeight="Bold" Foreground="#888888" FontSize="12" Margin="5,10,0,0"/>
				<ItemsControl ItemsSource="{Binding SelectedProduct.Reviews}">
					<ItemsControl.ItemTemplate>
						<DataTemplate x:DataType="models:Review">
							<Border Background="White" Margin="0,5" Padding="15" CornerRadius="10" BoxShadow="0 2 5 0 #10000000">
								<StackPanel Spacing="5">
									<Grid ColumnDefinitions="*, Auto">
										<TextBlock Text="{Binding User}" FontWeight="Bold" Foreground="#333333"/>
										<TextBlock Grid.Column="1" Text="{Binding Stars, StringFormat='★ {0}'}" Foreground="#999999" FontWeight="Bold"/>
									</Grid>
									<TextBlock Text="{Binding Text}" TextWrapping="Wrap" FontSize="13" Foreground="#555555"/>
								</StackPanel>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</StackPanel>
		</ScrollViewer>
	</Grid>
</UserControl>