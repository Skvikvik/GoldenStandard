<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:GoldenStandard.ViewModels"
             xmlns:models="using:GoldenStandard.Models"
             xmlns:conv="using:GoldenStandard.Converters"
             xmlns:asyncImage="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
             x:Class="GoldenStandard.Views.ProductDetailView"
             x:DataType="vm:ProductDetailViewModel">

	<UserControl.Resources>
		<conv:QualityColorConverter x:Key="QualityColorConverter"/>
	</UserControl.Resources>

	<ScrollViewer Background="#F5F5F5">
		<StackPanel Margin="20" Spacing="15">

			<Button Command="{Binding GoBack}"
                    Content="â† ÐÐ°Ð·Ð°Ð´ Ðº ÑÐ¿Ð¸ÑÐºÑƒ"
                    Background="Transparent"
                    Foreground="#333333"/>

			<Border Background="White" CornerRadius="12" Padding="20" BoxShadow="0 2 10 0 #15000000">
				<StackPanel Spacing="15">

					<Border CornerRadius="8" ClipToBounds="True" Background="#F9F9F9" Height="300">
						<Panel>
							<TextBlock Text="ðŸ“·" FontSize="50" Opacity="0.2"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>

							<Image asyncImage:ImageLoader.Source="{Binding Product.Image}"
                                   Stretch="Uniform"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
						</Panel>
					</Border>

					<StackPanel Spacing="10">
						<TextBlock Text="{Binding Product.Name}"
                                   FontSize="24"
                                   FontWeight="Bold"
                                   TextWrapping="Wrap"/>

						<TextBlock Text="{Binding Product.Price, StringFormat={}{0} â‚½}"
                                   FontSize="20"
                                   Foreground="Goldenrod"
                                   FontWeight="Bold"/>

						<StackPanel Spacing="5" Margin="0,5">
							<Grid ColumnDefinitions="*, Auto">
								<TextBlock Text="ÐŸÐ¾Ð»ÐµÐ·Ð½Ð¾ÑÑ‚ÑŒ ÑÐ¾ÑÑ‚Ð°Ð²Ð°:" FontSize="14" Foreground="#666666"/>
								<TextBlock Grid.Column="1"
                                           Text="{Binding Product.QualityPercentage, StringFormat={}{0}%}"
                                           FontWeight="Bold"
                                           FontSize="14"
                                           Foreground="{Binding Product.QualityPercentage, Converter={StaticResource QualityColorConverter}}"/>
							</Grid>
							<ProgressBar Value="{Binding Product.QualityPercentage}"
                                         Minimum="0" Maximum="100"
                                         Height="10"
                                         CornerRadius="5"
                                         Background="#F0F0F0"
                                         Foreground="{Binding Product.QualityPercentage, Converter={StaticResource QualityColorConverter}}"/>
						</StackPanel>

						<Separator Height="1" Background="#EEEEEE"/>

						<TextBlock Text="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:" FontWeight="SemiBold"/>
						<TextBlock Text="{Binding Product.Description}"
                                   TextWrapping="Wrap"
                                   Foreground="#666666"/>
					</StackPanel>
				</StackPanel>
			</Border>

			<Border Background="White" CornerRadius="12" Padding="20" BoxShadow="0 2 10 0 #10000000">
				<StackPanel Spacing="10">
					<TextBlock Text="ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð·Ñ‹Ð²" FontSize="18" FontWeight="Bold"/>
					<Grid ColumnDefinitions="Auto, *">
						<TextBlock Text="ÐžÑ†ÐµÐ½ÐºÐ°: " VerticalAlignment="Center"/>
						<ComboBox Grid.Column="1"
                                  ItemsSource="{Binding StarOptions}"
                                  SelectedItem="{Binding NewRating}"
                                  HorizontalAlignment="Stretch"/>
					</Grid>
					<TextBox Text="{Binding NewReviewText}"
                             Watermark="Ð’Ð°ÑˆÐµ Ð¼Ð½ÐµÐ½Ð¸Ðµ Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ðµ..."
                             AcceptsReturn="True"
                             Height="80"/>
					<Button Command="{Binding SendReviewCommand}"
                            Content="ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð·Ñ‹Ð²"
                            HorizontalAlignment="Right"
                            Background="#3A3A3A"
                            Foreground="White"
                            Padding="15,8"/>
				</StackPanel>
			</Border>

			<TextBlock Text="ÐžÑ‚Ð·Ñ‹Ð²Ñ‹ Ð¿Ð¾ÐºÑƒÐ¿Ð°Ñ‚ÐµÐ»ÐµÐ¹" FontSize="18" FontWeight="Bold" Margin="0,10,0,0"/>

			<ItemsControl ItemsSource="{Binding Reviews}">
				<ItemsControl.ItemTemplate>
					<DataTemplate x:DataType="models:Review">
						<Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,10" BoxShadow="0 1 3 0 #08000000">
							<StackPanel Spacing="8">
								<Grid ColumnDefinitions="Auto, *, Auto">
									<Border Grid.Column="0" Width="32" Height="32" Background="#F0F0F0" CornerRadius="16" Margin="0,0,10,0">
										<TextBlock Text="ðŸ‘¤" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="16"/>
									</Border>
									<TextBlock Grid.Column="1"
                                               Text="{Binding User.Username}"
                                               FontWeight="Bold"
                                               VerticalAlignment="Center"
                                               FontSize="14"
                                               Foreground="#333333"/>
									<StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
										<TextBlock Text="â˜… " Foreground="Orange" FontWeight="Bold"/>
										<TextBlock Text="{Binding Rating}" FontWeight="Bold" Foreground="Orange"/>
									</StackPanel>
								</Grid>
								<Separator Height="1" Background="#F5F5F5"/>
								<TextBlock Text="{Binding Text}"
                                           TextWrapping="Wrap"
                                           Foreground="#555555"
                                           FontSize="13"
                                           LineHeight="18"/>
							</StackPanel>
						</Border>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>

		</StackPanel>
	</ScrollViewer>
</UserControl>