<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:GoldenStandard.ViewModels"
             xmlns:models="using:GoldenStandard.Models"
             xmlns:conv="using:GoldenStandard.Converters"
             x:Class="GoldenStandard.Views.ProductDetailView"
             x:DataType="vm:ProductDetailViewModel">

	<UserControl.Resources>
		<conv:QualityColorConverter x:Key="QualityColorConverter"/>
	</UserControl.Resources>

	<ScrollViewer Background="#F5F5F5">
		<StackPanel Margin="20" Spacing="15">

			<Grid ColumnDefinitions="*, Auto">
				<Button Grid.Column="0"
                        Command="{Binding GoBackCommand}"
                        Content="â† ÐÐ°Ð·Ð°Ð´ Ðº ÑÐ¿Ð¸ÑÐºÑƒ"
                        Background="Transparent"
                        Foreground="#333333"
                        Padding="0,10"
                        HorizontalAlignment="Left"/>

				<Button Grid.Column="1"
                        Command="{Binding DeleteProductCommand}"
                        Background="#FFF0F0"
                        BorderBrush="#FFCCCC"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="12,5">
					<StackPanel Orientation="Horizontal" Spacing="5">
						<TextBlock Text="ðŸ—‘ï¸" FontSize="14" VerticalAlignment="Center"/>
						<TextBlock Text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" Foreground="#D32F2F" FontWeight="Bold" VerticalAlignment="Center" FontSize="12"/>
					</StackPanel>
				</Button>
			</Grid>

			<Border Background="White" CornerRadius="12" Padding="20" BoxShadow="0 2 10 0 #15000000">
				<StackPanel Spacing="15">
					<Border CornerRadius="8" ClipToBounds="True" Background="#F9F9F9" Height="300">
						<Panel>
							<TextBlock Text="ðŸ“·" FontSize="50" Opacity="0.2" HorizontalAlignment="Center" VerticalAlignment="Center"
                                       IsVisible="{Binding Product.ImageSource, Converter={x:Static ObjectConverters.IsNull}}"/>
							<Image Source="{Binding Product.ImageSource}" Stretch="Uniform"/>
						</Panel>
					</Border>

					<StackPanel Spacing="10">
						<TextBlock Text="{Binding Product.Name}" FontSize="24" FontWeight="Bold" TextWrapping="Wrap"/>

						<Grid ColumnDefinitions="Auto, *, Auto">
							<StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
								<TextBlock Text="â˜…" Foreground="Orange" FontSize="22" VerticalAlignment="Center"/>
								<TextBlock Text="{Binding Product.Rating, StringFormat={}{0:N1}}" FontSize="22" FontWeight="Bold" VerticalAlignment="Center"/>
								<TextBlock Text="{Binding Product.ReviewsCountBracket}" Foreground="Gray" FontSize="16" VerticalAlignment="Center" Margin="0,2,0,0"/>
							</StackPanel>
							<StackPanel Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center">
								<TextBlock Text="{Binding Product.Price, StringFormat={}{0} â‚½}" FontSize="24" Foreground="Goldenrod" FontWeight="Bold" HorizontalAlignment="Right"/>
								<TextBlock Text="Ð’ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸" Foreground="#2ECC71" FontSize="12" FontWeight="SemiBold" HorizontalAlignment="Right"/>
							</StackPanel>
						</Grid>

						<StackPanel Spacing="5" Margin="0,5">
							<Grid ColumnDefinitions="*, Auto">
								<TextBlock Text="ÐŸÐ¾Ð»ÐµÐ·Ð½Ð¾ÑÑ‚ÑŒ ÑÐ¾ÑÑ‚Ð°Ð²Ð°:" FontSize="14" Foreground="#666666"/>
								<TextBlock Grid.Column="1" Text="{Binding Product.QualityPercentage, StringFormat={}{0}%}"
                                           FontWeight="Bold" Foreground="{Binding Product.QualityPercentage, Converter={StaticResource QualityColorConverter}}"/>
							</Grid>
							<ProgressBar Value="{Binding Product.QualityPercentage}" Height="8" CornerRadius="4" Minimum="0" Maximum="100"
                                         Foreground="{Binding Product.QualityPercentage, Converter={StaticResource QualityColorConverter}}"/>
						</StackPanel>

						<Separator Height="1" Background="#EEEEEE"/>
						<TextBlock Text="Ð¡Ð¾ÑÑ‚Ð°Ð² Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°:" FontWeight="SemiBold" FontSize="16"/>
						<TextBlock Text="{Binding Product.Composition}" TextWrapping="Wrap" FontStyle="Italic" Foreground="#444444" LineHeight="20"/>
					</StackPanel>
				</StackPanel>
			</Border>

			<Border Background="White" CornerRadius="12" Padding="20" BoxShadow="0 2 10 0 #10000000">
				<StackPanel Spacing="10">
					<TextBlock Text="ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð·Ñ‹Ð²" FontSize="18" FontWeight="Bold"/>
					<Grid ColumnDefinitions="Auto, *">
						<TextBlock Text="ÐžÑ†ÐµÐ½ÐºÐ°: " VerticalAlignment="Center" Margin="0,0,10,0"/>
						<ComboBox Grid.Column="1" ItemsSource="{Binding StarOptions}" SelectedItem="{Binding NewRating}" HorizontalAlignment="Stretch"/>
					</Grid>
					<TextBox Text="{Binding NewReviewText}" Watermark="Ð’Ð°ÑˆÐµ Ð¼Ð½ÐµÐ½Ð¸Ðµ Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ðµ..." Height="80" AcceptsReturn="True" TextWrapping="Wrap"/>
					<Button Command="{Binding SendReviewCommand}" Content="ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð·Ñ‹Ð²" HorizontalAlignment="Right" Background="#3A3A3A" Foreground="White" Padding="15,8"/>
				</StackPanel>
			</Border>

			<TextBlock Text="ÐžÑ‚Ð·Ñ‹Ð²Ñ‹ Ð¿Ð¾ÐºÑƒÐ¿Ð°Ñ‚ÐµÐ»ÐµÐ¹" FontSize="18" FontWeight="Bold" Margin="0,10,0,0" IsVisible="{Binding Product.HasReviews}"/>
			<ItemsControl ItemsSource="{Binding Product.Reviews}">
				<ItemsControl.ItemTemplate>
					<DataTemplate x:DataType="models:Review">
						<Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,10" BoxShadow="0 1 3 0 #08000000">
							<StackPanel Spacing="8">
								<Grid ColumnDefinitions="Auto, *, Auto">
									<Border Grid.Column="0" Width="32" Height="32" Background="#F0F0F0" CornerRadius="16">
										<TextBlock Text="ðŸ‘¤" HorizontalAlignment="Center" VerticalAlignment="Center"/>
									</Border>
									<TextBlock Grid.Column="1" Text="{Binding User.Username}" FontWeight="Bold" Margin="10,0" VerticalAlignment="Center" Foreground="#333333"/>
									<StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
										<TextBlock Text="â˜… " Foreground="Orange"/>
										<TextBlock Text="{Binding Rating}" Foreground="Orange" FontWeight="Bold"/>
									</StackPanel>
								</Grid>
								<TextBlock Text="{Binding Text}" TextWrapping="Wrap" Foreground="#555555" FontSize="13"/>
							</StackPanel>
						</Border>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</StackPanel>
	</ScrollViewer>
</UserControl>